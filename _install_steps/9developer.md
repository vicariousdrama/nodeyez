---
name: Development Environment
title: NODEYEZ Development Environment
layout: default
---

# Developing Enhancements

If you want to make improvements to Nodeyez, it's strongly recommended to have a code environment independent of the Nodeyez user.  This section will guide you through setting up development using Visual Studio Code as an IDE.  This guide assumes that the user is working on an Ubuntu or Debian based platform.

# Python Environment

Create an environment for Nodeyez, activate it, and install modules referenced

```shell
python3 -m venv ~/.pyenv/nodeyez

source ~/.pyenv/nodeyez/bin/activate

python3 -m pip install --upgrade Pillow beautifulsoup4 pandas qrcode Wand exifread urllib3 requests redis
```

# Clone the Project

Just as we did for the Nodeyez user, we'll clone the repository and setup initial folders

```shell
cd ~ 

git clone https://github.com/vicariousdrama/nodeyez.git

cd ~/nodeyez

mkdir -p ./config

mkdir -p ./data

mkdir -p ./imageoutput

cp ./sample-config/*.json ./config
```

# Setup Visual Studio IDE

## Download and Install

For more details, follow the guidance available on the [Visual Studio Code on Linux](https://code.visualstudio.com/docs/setup/linux) installation details.

```shell
cd /tmp

wget "https://code.visualstudio.com/sha/download?build=stable&os=linux-deb-x64" -O vscode.deb

sudo dpkg -i vscode.deb
```

## Launch Visual Studio Code

By default, installing the .deb package should have created shortcuts to Visual Studio Code under the Programming menu.
From the command line, you can launch Visual Code from any path via the following:

```shell
code .
```

To launch from our Nodeyez repository folder, just switch to the path first

```shell
cd ~/nodeyez

code .
```

## Install Extensions

Access the Extensions view by either the shortcut (CTRL+SHIFT+X), or from expanding the File menu, choosing Preferences, and finally Extensions.

From the Search bar, look for and install the following extensions:

- GitLens - Git supercharged [from GitKraken] - Sueprcharge Git with VS Code -- Visualize code authorship at a glance via Git blame annotations and CodeLens, seamlessly navigate and explore Git repositories, gain valuable insights via rich visualizations and powerful comparison commands, and so much more.

- Pylance [from Microsoft]: A performant, feature-rich language server for Python ins VS Code

- Python [from Microsoft]: IntelliSense (Pylance), Linting, Debugging (multi-threaded, remote), Jupyter Notebooks, code formatting, refactoring, unit tests, and more.

- systemd-unit-file [from coolbear]: Language support for systemd unit files

- View Image for Python Debugging [from Elazar Cohen] - simply view the image of the image variables when debugging python

## Choose Python Interpreter

When in Visual Studio Code, we want to make sure that we're using the environment that we setup previously.  Access the command palette by either the shortcut (CTRL+SHIFT+P) or from the View menu.

Type in `Python: Select Interpreter` and press [ENTER].

From the options that appear, choose the one that corresponds to `~/.pyenv/nodeyez/bin/python`.

# Test a Simple Script

From the scripts folder, select the ipaddress.py file to open in an editor.

Start running the script by the shortcut (F5) or choosing Start Debugging from the Run menu.

If there are no errors, you will see some startup text in the terminal pane, followed by `sleeping for 120 seconds`.

You can stop debugging via the shortcut (SHIFT+F5) or from the Run menu.

Look for an image generated in the [../imageoutput](../imageoutput) folder.

In the footer of most images generated by Nodeyez is an "as of" datestamp.  This can help you be certain whether you are reviewing the latest changes.

# Make Changes and Test

Create a temporary branch to test your changes. You can do this from the Source Control pane (CTRL+SHIFT+G G) in the Branches subpane, but it's often easier to do common git tasks simply by entering commands in the terminal pane:

```shell
git checkout -b test1
```
If this is your first time setting up git, you'll also want to set your user email and name

```shell
git config --global user.email "you@example.com"

git config --global user.name "Your Name"
```

Verify that the current branch name is depicted in the lower left corner of Visual Studio Code

Try making a change to the IP Address script. Find the line that renders the current ip list, and change its font size.

In this line below, vicarioustext is one of the scripts with assorted helper methods to render text into an image canvas.  The third argument represents the font size, shown here as 36.  

```python
vicarioustext.drawcenteredtext(draw, str(currentip), 36, int(width/2), int(height/2), colorTextFG, True)
```
Make a change, save the file, and then start running the script via the shortcut (F5) or from choosing Start Debugging from the Run menu.

Stop the script and review the output generated in the imageoutput folder as before.  You should see the as of footer line changed to a more recent time, as well as visual changes to the font size based on your alterations.

# Publish Changes

Once you are satisfied with any changes you've made, you can publish them to a branch in your own repository, and then begin a pull request.

## Commit your Changes Locally

Before going much further, lets commit your changes to your local branch.

In Visual Studio Code, switch to the Source Control view (CTRL+SHIFT+G G). If the Source Control subpanel is not displayed, toggle it by clicking the three dots in the upper right corner of the Source Control pane and choosing that menu option. Expand the Source Control subpanel and you'll see the list of files you've added, modified, or deleted.

At the top of the Source Control panel you can provide a comment for your changes, and click Commit.

## Creating your Fork

Sign in to Github, creating a new account if you do not already have one.  If you are creating a new account, you should also [setup an SSH key](https://github.com/settings/keys) from the computer you are working on.

Navigate to the project at [https://github.com/vicariousdrama/nodeyez](https://github.com/vicariousdrama/nodeyez).  

Towards the upper right corner, you can click on the Fork button.  This will start a fork of the project under your username.  Review the settings making adjustments based on your preferences and proceed with Create Fork.

## Add a Remote

With your new fork created in Github, click the green Code dropdown button, and then select SSH.  Copy the value. It should look something like `git@github.com:Username/nodeyez.git`

In Visual Studio Code, switch to the Source Control view (CTRL+SHIFT+G G). If the Remotes subpanel is not displayed, toggle it by clicking the three dots in the upper right corner of the Source Control pane and choosing that menu option. Expand the Remotes subpanel.  You should already have a remote named 'origin' from when the project was cloned above. Click the `+` action to Add the new remote. You can provide whatever name you want. I like to use the name `myfork` as a common alias in this scenario.  For the URL, provide the SSH URL from your repository (git@github.com:Username/nodeyez.git)

## Pushing to the Remote

From the Terminal pane, you can use this command to push your branch to your desired forked repository, replacing `myfork` with whatever you named your remote and `test1` with your branch name.

```shell
git push --set-upstream myfork test1
```

In Visual Studio, this will switch the active upstream to the remote that which you specified.

## Initiating a Pull Request

From within the GitHub interface, you can view your branch, and create a pull request. By default, Github will open a pull request against the base repository from which yours is forked, but you can change that as desired.

# Some Ways You Can Contribute

Helping Open Source projects comes in many forms.  If you're able to do any of the following, jump right in!

- Help improve documentation to add clarity, make corrections, spelling and grammer adjustments
- Help refactor code for clarity. Theres a lot of redundancy in the codebase as its grown over time, and is ripe for better organization
- Add new display panel scripts.  Got an idea for a cool new visual? Even if you can't code it, someone else may be able to. Open an issue in github!
- Enhance existing display panels.  Common support for the following kinds of things are nice to haves
  - Set background image instead of color
  - Choose font family being used
- Test with common display sizes. The scripts were all started with 480x320 resolution due to the screen initially chosen modeled after Raspiblitz, but there are plenty of other screen sizes that need testing for scaling output for:
  - 800x480
  - 720x720
  - 1024x768
  - 1920x1080
- Internationalization & Translations - Right now scripts are generally based on English language, the US Dollar, and this could be improved to offer broader support

---


[Home](../) | [Back to Running Services at Startup]({% link _install_steps/8runatstartup.md %})